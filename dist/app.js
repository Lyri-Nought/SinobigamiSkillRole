(()=>{"use strict";function e(){for(var e=new Array,n=0;n<11;n++)for(var t=0;t<6;t++){var o=document.querySelector("#skills\\.row".concat(n," > td:nth-child(").concat(2*t+2,")"));if(null==o?void 0:o.classList.contains("selected")){var r={row:n,column:t};e.push(r)}}return e}function n(e){var n=!1,t=document.querySelector("#ninpou > tbody"),o=null==t?void 0:t.querySelectorAll("tr");if(null==o?void 0:o.length)for(var r=0;r<(null==o?void 0:o.length);r++)o[r].querySelectorAll("input")[2].value===e&&(n=!0);return n}function t(e){var n=!1,t=document.querySelector(e);return(null==t?void 0:t.checked)&&(n=!0),n}location.hostname+location.pathname==="character-sheets.appspot.com/shinobigami/edit.html"&&function(e){return n=this,t=void 0,r=function(){return function(e,n){var t,o,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;l&&(l=0,c[0]&&(i=0)),i;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}(this,(function(n){return[2,new Promise((function(n,t){chrome.storage.local.get(["keyConfig"],(function(t){var o,r=null===(o=t.keyConfig)||void 0===o?void 0:o[e];if(void 0===r)switch(e){case"openKey":n("a");break;case"copyKey":n("c");break;case"pasteKey":n("v")}else n(r)}))}))]}))},new((o=void 0)||(o=Promise))((function(e,l){function i(e){try{a(r.next(e))}catch(e){l(e)}}function c(e){try{a(r.throw(e))}catch(e){l(e)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((r=r.apply(n,t||[])).next())}));var n,t,o,r}("copyKey").then((function(o){var r=o;document.addEventListener("keydown",(function(o){console.log("done"),o.altKey&&o.key===r&&function(){if(document.querySelector("#skills\\.row0 > td:nth-child(2)")){var o={gaps:(r=[!1,!1,!1,!1,!1],r[0]=t("#skills\\.a"),r[1]=t("#skills\\.b"),r[2]=t("#skills\\.c"),r[3]=t("#skills\\.d"),r[4]=t("#skills\\.e"),r),skills:e(),makaiKogaku:t("#skills\\.f"),mokuren:t("#skills\\.outRow"),tatsujin:n("達人")};!function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{var n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}}(JSON.stringify(o)),window.alert("キャラクターの習得特技をクリップボードにコピーしました。")}else window.alert("キャラクターの習得特技を取得できませんでした。\nキャラクターシート上で実行してください。");var r}()})),console.log("copy:",r)}))})();